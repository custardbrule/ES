<div
  class="md:px-8 py-4 min-h-(--content-height) max-h-(--content-height) flex flex-col"
>
  <div
    class="shadow-lg bg-bg-secondary py-4 px-4 md:px-8 max-h-full overflow-auto flex flex-col flex-1 md:gap-12 gap-8 md:rounded-sm shadow-md"
  >
    <section class="flex gap-4">
      <div
        #canvas
        class="h-[100px] w-[100px] min-w-[100px] border border-primary"
      ></div>
      <div class="flex flex-col gap-4 justify-center">
        <h2 class="font-bold text-4xl text-primary">Title</h2>
        <h3 class="font-semibold text text-secondary">Author</h3>
      </div>
    </section>

    <div class="relative">
      <p
        #description
        class="text-md font-light text-secondary indent-2 transition-all duration-300 line-clamp-4"
        [class.line-clamp-none]="isDescriptionExpanded"
      >
        Description Lorem ipsum dolor sit amet consectetur, adipisicing elit.
        Sapiente labore doloremque quis! Dolores mollitia veritatis repellendus
        ratione sint, enim voluptatibus neque ea laborum natus cumque, illum
        aliquid earum repudiandae cupiditate. Lorem ipsum dolor sit amet
        consectetur adipisicing elit. Libero provident quia, suscipit assumenda
        iure maiores velit ratione laudantium, aspernatur, laboriosam expedita.
        Quaerat praesentium maxime exercitationem corrupti nulla? Et, hic ex.
      </p>
      @if(((description.scrollHeight > description.clientHeight) && !isDescriptionExpanded) || isDescriptionExpanded) {
      <button
        type="button"
        class="md:hidden md:block float-end mt-2 text-sm text-primary hover:text-secondary underline font-medium"
        (click)="isDescriptionExpanded = !isDescriptionExpanded"
      >
        {{ isDescriptionExpanded ? 'Show less' : 'Read more' }}
      </button>
      }
    </div>

    <div
      class="flex flex-col gap-4 border border-border-secondary rounded-sm px-2 md:px-8 py-4"
    >
      @for(day of days; track day.id){
      <div class="flex flex-col gap-4 text-primary text-sm">
        <div class="flex gap-2 text-md text-secondary items-center">
          <span>{{ day.date }}</span>
          <button
            type="button"
            class="bg-bg-yellow-primary rounded-md hover:brightness-125 active:scale-95 transition-transform"
            (click)="toggleDay(day)"
            [disabled]="day.isLoading"
          >
            <div
              [class.rotate-180]="day.isExpanded"
              class="transition-transform duration-300"
            >
              <app-svg-icon name="dropdown-arrow-24"></app-svg-icon>
            </div>
          </button>
        </div>
        @if(day.isLoading) {
          <!-- Skeleton loading state -->
          <div class="flex flex-col gap-4 px-4 animate-pulse">
            @for(skeleton of [1,2,3]; track skeleton) {
              <div class="flex gap-4">
                <div class="w-12 h-4 bg-bg-yellow-primary rounded"></div>
                <div class="flex-1 h-4 bg-bg-yellow-primary rounded"></div>
              </div>
            }
          </div>
        }
        @if(day.isExpanded && day.sections.length > 0 && !day.isLoading) {
          @for(section of day.sections; track $index) {
            <div class="flex flex-col gap-2 md:gap-4 md:px-4">
              <div class="flex items-center gap-2">
                <span class="font-semibold text-secondary">{{ section.time }}</span>
                @if(section.isPinned) {
                  <app-svg-icon name="pin-24"></app-svg-icon>
                }
              </div>
              <p class="indent-4">{{ section.content }}</p>
            </div>
          }
        }
      </div>
      }
    </div>
  </div>
</div>
